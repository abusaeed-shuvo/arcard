<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
		<style>
			body {
				margin: 0;
				overflow: hidden;
			}
			#socialContainer {
				position: absolute;
				left: 50%; /* center horizontally */
				bottom: 25%; /* raise 25% from the bottom of the screen */
				transform: translateX(-50%); /* perfectly center it */
				display: flex;
				gap: 10px; /* spacing between icons */
				padding: 10px 15px;
				border-radius: 15px; /* rounded corners */
				z-index: 10;
				display: none; /* initially hidden */
				align-items: center;
				justify-content: center;

				/* Default fallback color */
				background-color: rgba(0, 0, 0, 0.4);
				backdrop-filter: blur(6px); /* subtle glass effect */
				box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
			}

			/* Dark mode */
			@media (prefers-color-scheme: dark) {
				#socialContainer {
					background-color: rgba(255, 255, 255, 0.25);
				}
			}

			/* Light mode */
			@media (prefers-color-scheme: light) {
				#socialContainer {
					background-color: rgba(0, 0, 0, 0.35);
				}
			}

			/* Icons */
			.social-icon {
				width: 50px;
				height: 50px;
				cursor: pointer;
				transition: transform 0.2s ease, opacity 0.2s ease;
			}

			.social-icon:hover {
				transform: scale(1.15);
				opacity: 0.9;
			}

			#githubIcon {
				left: 20px;
			}
			#linkedinIcon {
				left: 90px;
			}
			#emailIcon {
				left: 160px;
			}
			#unmuteIcon {
				left: 230px;
			}
		</style>
	</head>

	<body>
		<!-- Overlay icons -->
		<div id="socialContainer">
			<img
				id="githubIcon"
				class="social-icon"
				src="https://cdn-icons-png.flaticon.com/512/25/25231.png"
			/>
			<img
				id="linkedinIcon"
				class="social-icon"
				src="https://cdn-icons-png.flaticon.com/512/174/174857.png"
			/>
			<img
				id="emailIcon"
				class="social-icon"
				src="https://cdn-icons-png.flaticon.com/512/732/732200.png"
			/>
			<img
				id="unmuteIcon"
				class="social-icon"
				src="https://cdn-icons-png.flaticon.com/512/727/727240.png"
			/>
		</div>
		<a-scene
			mindar-image="imageTargetSrc: https://abusaeed-shuvo.github.io/arcard/targets/target-logo.mind; 
                     uiLoading: false; 
                     uiScanning: false;"
			color-space="sRGB"
			renderer="colorManagement: true, physicallyCorrectLights"
			embedded
			vr-mode-ui="enabled: false"
			device-orientation-permission-ui="enabled: false"
		>
			<a-assets>
				<a-asset-item
					id="avatarModel"
					src="https://abusaeed-shuvo.github.io/arcard/models/business-model.glb"
				></a-asset-item>
				<a-asset-item
					id="cutFish"
					src="https://abusaeed-shuvo.github.io/arcard/models/cut-fish.glb"
				></a-asset-item>
				<a-asset-item
					id="cubeModel"
					src="https://abusaeed-shuvo.github.io/arcard/models/cube.glb"
				></a-asset-item>
				<a-asset-item
					id="bottleModel"
					src="https://abusaeed-shuvo.github.io/arcard/models/bottle.glb"
				></a-asset-item>
				<video
					id="introVideo"
					src="https://abusaeed-shuvo.github.io/arcard/videos/intro.mp4"
					loop
					muted
					playsinline
					crossorigin="anonymous"
				></video>
			</a-assets>

			<!-- AR Target -->
			<a-entity mindar-image-target="targetIndex: 0">
				<!-- 3D Model -->
				<a-gltf-model
					src="#bottleModel"
					rotation="0 0 0"
					position="0 0 0"
					scale="0.5 0.5 0.5"
				></a-gltf-model>

				<!-- Intro Video -->
				<a-video
					src="#introVideo"
					position="0 0.8 0"
					width="1.2"
					height="0.7"
					rotation="0 0 0"
				></a-video>

				<!-- Text Info -->
				<a-text
					value="John Doe"
					position="0 1.6 0"
					align="center"
					color="#fff"
					width="2"
				></a-text>
				<a-text
					value="Business: AR Cards"
					position="0 1.4 0"
					align="center"
					color="#fff"
					width="2"
				></a-text>
				<a-text
					value="Address: 123 Main Street, City"
					position="0 1.2 0"
					align="center"
					color="#fff"
					width="2"
				></a-text>
			</a-entity>
		</a-scene>

		<script>
			const videoEl = document.getElementById("introVideo");
			// Get the container
			const socialContainer = document.getElementById("socialContainer");

			// MindAR target entity
			const target = document.querySelector("[mindar-image-target]");

			// Show social icons when target is found
			target.addEventListener("targetFound", () => {
				socialContainer.style.display = "flex";
			});

			// Hide social icons when target is lost
			target.addEventListener("targetLost", () => {
				socialContainer.style.display = "none";
			});

			// Autoplay muted when AR target is found
			document
				.querySelector("[mindar-image-target]")
				.addEventListener("targetFound", () => {
					videoEl.play();
				});

			// Overlay icon click events
			document.getElementById("githubIcon").addEventListener("click", () => {
				window.open("https://github.com/abusaeed-shuvo", "_blank");
			});
			document.getElementById("linkedinIcon").addEventListener("click", () => {
				window.open("https://linkedin.com/in/abusaeed-shuvo", "_blank");
			});
			document.getElementById("emailIcon").addEventListener("click", () => {
				window.location.href = "mailto:yourname@example.com";
			});

			// Unmute button
			document.getElementById("unmuteIcon").addEventListener("click", () => {
				videoEl.muted = false;
				videoEl.play();
				alert("Video unmuted!");
			});
		</script>
	</body>
</html>
