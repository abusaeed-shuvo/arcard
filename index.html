<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
		<style>
			body {
				margin: 0;
				overflow: hidden;
			}

			#socialContainer {
				position: absolute;
				left: 50%; /* center horizontally */
				bottom: 10%; /* raise 25% from the bottom of the screen */
				transform: translateX(-50%); /* perfectly center it */
				display: flex;
				flex-direction: column;
				gap: 10px; /* spacing between icons */
				padding: 10px 15px;
				border-radius: 15px; /* rounded corners */
				z-index: 10;
				/* initially hidden */
				align-items: center;
				justify-content: center;
				display: none;
				/* Default fallback color */
				background-color: rgba(0, 0, 0, 0.4);
				backdrop-filter: blur(6px); /* subtle glass effect */
				box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
			}

			/* Dark mode */
			@media (prefers-color-scheme: dark) {
				#socialContainer {
					background-color: rgba(255, 255, 255, 0.25);
				}
			}

			/* Light mode */
			@media (prefers-color-scheme: light) {
				#socialContainer {
					background-color: rgba(0, 0, 0, 0.35);
				}
			}
			.row {
				display: flex;
				gap: 10px; /* spacing between icons */
			}

			/* Icons */
			.social-icon {
				width: 50px;
				height: 50px;
				cursor: pointer;
				transition: transform 0.2s ease, opacity 0.2s ease;
			}

			.social-icon:hover {
				transform: scale(1.15);
				opacity: 0.9;
			}
		</style>
	</head>

	<body>
		<div id="socialContainer">
			<!-- First row -->
			<div class="row">
				<img id="facebookIcon" class="social-icon" src="./icons/facebook.png" />
				<img id="linkedinIcon" class="social-icon" src="./icons/linkedin.png" />
				<img id="whatsappIcon" class="social-icon" src="./icons/whatsapp.png" />
				<img id="locationIcon" class="social-icon" src="./icons/location.png" />
			</div>

			<!-- Second row -->
			<div class="row">
				<img id="phoneIcon" class="social-icon" src="./icons/call.png" />
				<img id="mailIcon" class="social-icon" src="./icons/mail.png" />
				<img id="websiteIcon" class="social-icon" src="./icons/web.png" />
				<img id="contactIcon" class="social-icon" src="./icons/contact.png" />
			</div>
		</div>
		<a-scene
			mindar-image="imageTargetSrc: https://abusaeed-shuvo.github.io/arcard/targets/targets.mind; 
                     uiLoading: false; 
                     uiScanning: false;"
			color-space="sRGB"
			renderer="colorManagement: true, physicallyCorrectLights"
			vr-mode-ui="enabled: false"
			device-orientation-permission-ui="enabled: false"
		>
			<a-assets>
				<img
					id="cardPNG"
					src="https://abusaeed-shuvo.github.io/arcard/img/icon.jpg"
				/>

				<video
					id="introVideo"
					src="https://abusaeed-shuvo.github.io/arcard/videos/intro.mp4"
					loop
					muted
					playsinline
					crossorigin="anonymous"
				></video>
			</a-assets>

			<a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

			<!-- AR Target -->
			<a-entity mindar-image-target="targetIndex: 0">
				<!-- CardPNG -->
				<a-entity
					position="0 0.8 0.05"
					rotation="0 0 0"
					width="1.2"
					height="0.7"
				>
					<a-plane
						src="#cardPNG"
						width="0.6"
						height="0.6"
						position="-0.2 0 0"
					></a-plane>
					<a-entity position="0.2 0 0">
						<a-text
							value="John Doe"
							color="#fff"
							width="1.2"
							position="0 0.2 0"
						></a-text>
						<a-text
							value="Business: AR Cards"
							color="#fff"
							width="1.2"
							position="0 0 0"
						></a-text>
						<a-text
							value="Address: 123 Main Street, City"
							color="#fff"
							width="1.2"
							position="0 -0.2 0"
						></a-text>
					</a-entity>
				</a-entity>
				<!-- Intro Video -->
				<a-video
					src="#introVideo"
					position="0 -0.8 0"
					width="1.2"
					height="0.7"
					rotation="0 0 0"
				></a-video>
			</a-entity>
		</a-scene>

		<script>
			const videoEl = document.getElementById("introVideo");
			// Get the container
			const socialContainer = document.getElementById("socialContainer");

			// MindAR target entity
			const target = document.querySelector("[mindar-image-target]");

			// Show social icons when target is found
			target.addEventListener("targetFound", () => {
				socialContainer.style.display = "flex";
			});

			target.addEventListener("targetLost", () => {
				socialContainer.style.display = "none";
			});

			// Autoplay muted when AR target is found
			document
				.querySelector("[mindar-image-target]")
				.addEventListener("targetFound", () => {
					videoEl.play();
				});

			// Overlay icon click events
			// Facebook profile/page
			document.getElementById("facebookIcon").addEventListener("click", () => {
				window.open("https://www.facebook.com/yourusername", "_blank");
			});

			// LinkedIn profile
			document.getElementById("linkedinIcon").addEventListener("click", () => {
				window.open("https://www.linkedin.com/in/yourusername", "_blank");
			});

			// WhatsApp chat (replace number with country code)
			document.getElementById("whatsappIcon").addEventListener("click", () => {
				window.open("https://wa.me/8801234567890", "_blank"); // Bangladesh number example
			});

			// Location (Google Maps)
			document.getElementById("locationIcon").addEventListener("click", () => {
				window.open(
					"https://www.google.com/maps?q=123+Main+Street,+City",
					"_blank"
				);
			});

			// Phone call
			document.getElementById("phoneIcon").addEventListener("click", () => {
				window.location.href = "tel:+8801234567890"; // your phone number
			});

			// Email
			document.getElementById("mailIcon").addEventListener("click", () => {
				window.location.href = "mailto:youremail@example.com";
			});

			// Website
			document.getElementById("websiteIcon").addEventListener("click", () => {
				window.open("https://www.yourwebsite.com", "_blank");
			});

			// Contact card (vCard download or custom action)
			document.getElementById("contactIcon").addEventListener("click", () => {
				window.open("./your-contact.vcf", "_blank"); // vCard file
			});
		</script>
	</body>
</html>
