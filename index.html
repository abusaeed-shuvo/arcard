<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>AR Business Card</title>
		<script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-three.prod.js"></script>

		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
			rel="stylesheet"
		/>
		<style>
			body {
				display: flex;
				flex-direction: column;
				justify-content: flex-start; /* changed from space-between */
				height: 100vh; /* full viewport */
				margin: 0;
				padding: 0;
				align-items: center;
				font-family: "Montserrat", sans-serif;
				background: #6d6666;
				overflow-y: scroll;
				gap: 1rem; /* fixed spacing between elements */
			}

			/* Camera video style (fixed position) */
			#cameraFeed {
				position: fixed;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				width: 100%;
				height: 100%;
				object-fit: cover;
				z-index: -1;
			}

			#fixedVideo {
				width: 100vw;
				height: 20vh; /* relative height */
				border-radius: 12px;
				box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
				object-fit: cover;
				z-index: 20;
				margin-top: 0;
			}

			#logoBox {
				display: flex;
				flex-direction: row;
				align-items: center;
				justify-content: center;
				padding: 0.75rem 1rem;
				border-radius: 0.75rem;
				background-color: rgba(0, 0, 0, 0.2);
				backdrop-filter: blur(6px);
				gap: 1rem;
				max-width: 500px;
				text-align: center;
				color: white;
				z-index: 20;
				flex-shrink: 0;
			}
			#logoBox img {
				width: 100px;
				height: 100px;
				object-fit: cover;
				border-radius: 0.2rem;
				border: 2px solid white;
				box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
			}

			#logoBox h2 {
				margin: 0.25rem 0 0.1rem;
				font-size: 1.2em;
			}

			#logoBox p {
				margin: 0;
				font-size: 0.95em;
				opacity: 0.85;
			}
			#logoBoxText {
				display: flex;
				flex-direction: column;
				align-items: flex-start;
			}

			#contactContainer {
				display: flex;
				flex-direction: column;
				align-items: flex-start;
				gap: 0.75rem;
				width: 90%;
				max-width: 400px;
				padding: 0.5rem;
				border-radius: 0.5rem;
				background-color: rgba(0, 0, 0, 0.2);
				backdrop-filter: blur(6px);

				z-index: 20;
			}

			/* Each contact item */
			.contact-container {
				display: flex;
				flex-direction: row;
				justify-content: flex-start;
				align-items: center;
				gap: 0.5rem;
				cursor: pointer;
				width: 100%;
				transition: transform 0.2s ease, opacity 0.2s ease,
					background-color 0.2s ease, padding 0.2s ease, box-shadow 0.2s ease;
				padding: 0.1rem;
				border-radius: 0.5rem;
				background-color: rgba(0, 0, 0, 0);
			}
			.contact-container:hover {
				transform: scale(1.05);
				opacity: 0.95;
				background-color: rgba(0, 0, 0, 0.4);
				backdrop-filter: blur(6px);
				box-shadow: 0 -0.25rem 0.625rem rgba(0, 0, 0, 0.3);
			}

			.contact-container h2 {
				margin: 0;
				font-size: 1em;
				color: white;
				word-break: break-word; /* keep text inside container */
			}

			/* Contact icon */
			.contact-icon {
				width: 3rem;
				height: 3rem;
				flex-shrink: 0;
			}

			#socialContainer {
				display: flex;
				justify-content: space-evenly;
				align-items: center;

				gap: 0.75rem;
				width: 90%;
				max-width: 400px;
				padding: 0.5rem;
				border-radius: 0.5rem;
				background-color: rgba(0, 0, 0, 0.2);
				backdrop-filter: blur(6px);
				margin: 0 10px;
				margin-bottom: -1%;
				z-index: 10;
			}

			.social-icon {
				width: 2.5rem;
				height: 2.5rem;
				cursor: pointer;
				transition: transform 0.2s ease, opacity 0.2s ease;
			}

			.social-icon:hover {
				transform: scale(1.1);
				opacity: 0.9;
			}

			@media (max-width: 500px) {
				.social-icon {
					width: 60px;
					height: 60px;
				}
			}
			#addToContact {
				display: flex;
				justify-content: center;
				align-items: center;
				margin-top: auto;
				margin-bottom: calc(5vh + 1rem);
				cursor: pointer;
				z-index: 9;
			}

			#addToContact img {
				width: 160px; /* adjust as needed */
				height: 60px;

				opacity: 0.9;
				transition: transform 0.2s ease, opacity 0.2s ease;
			}

			#addToContact:hover img {
				transform: scale(1.05);
				opacity: 1;
			}
			#muteBtn {
				position: fixed;
				top: 1rem;
				right: 1rem;
				width: 40px;
				height: 40px;
				z-index: 30;
				cursor: pointer;
			}
		</style>
	</head>

	<body>
		<video id="cameraFeed" autoplay playsinline muted></video>

		<img id="muteBtn" src="./icons/mute.png" alt="Mute/Unmute" />
		<video
			id="fixedVideo"
			src="https://abusaeed-shuvo.github.io/arcard/videos/intro.mp4"
			autoplay
			muted
			playsinline
			loop
		></video>
		<!-- <iframe
			id="fixedVideo"
			width="320"
			height="180"
			src="https://www.youtube.com/embed/6VF7ikBwU0U?autoplay=1&mute=1"
			frameborder="0"
			allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
			allowfullscreen
		>
		</iframe> -->

		<div id="logoBox">
			<img src="./img/profile.png" alt="Profile" loading="lazy" />
			<div id="logoBoxText">
				<h2>John Smith</h2>
				<p>Android & AR Developer</p>
			</div>
		</div>
		<div id="contactContainer">
			<div id="phoneIcon" class="contact-container">
				<img class="contact-icon" src="./icons/call.png" />
				<h2>+8801234567890</h2>
			</div>

			<div id="mailIcon" class="contact-container">
				<img class="contact-icon" src="./icons/mail.png" />
				<h2>youremail@example.com</h2>
			</div>

			<div id="locationIcon" class="contact-container">
				<img class="contact-icon" src="./icons/location.png" />
				<h2>123 Main Street, City</h2>
			</div>
			<div id="facebookIcon" class="contact-container">
				<img class="contact-icon" src="./icons/facebook.png" />
				<h2>Facebook Profile</h2>
			</div>
		</div>

		<div id="socialContainer">
			<img id="snapchatIcon" class="social-icon" src="./icons/snapchat.png" />
			<img id="linkedinIcon" class="social-icon" src="./icons/linkedin.png" />

			<img id="whatsappIcon" class="social-icon" src="./icons/whatsapp.png" />
			<img id="websiteIcon" class="social-icon" src="./icons/web.png" />
		</div>
		<div id="addToContact">
			<img src="./icons/add-to-contact.png" alt="Add to contact" />
		</div>
		<a-scene
			id="arScene"
			mindar-image="imageTargetSrc: https://abusaeed-shuvo.github.io/arcard/targets/targets.mind; 
                uiLoading: false; 
                uiScanning: false;
    
            "
			color-space="sRGB"
			renderer="colorManagement: true, physicallyCorrectLights"
			vr-mode-ui="enabled: false"
			device-orientation-permission-ui="enabled: false"
		>
			<a-assets>
				<a-asset-item
					id="displayModel"
					src="https://abusaeed-shuvo.github.io/arcard/models/model.glb"
				></a-asset-item>
			</a-assets>

			<a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

			<!-- AR Target -->
			<a-entity mindar-image-target="targetIndex: 0">
				<!-- 3D Model -->
				<a-gltf-model
					src="#displayModel"
					rotation="90 0 0"
					position="0 0 0.01"
					scale="0.5 0.5 0.5"
				></a-gltf-model>
			</a-entity>
		</a-scene>
		<script>
			const arScene = document.querySelector("#arScene");
			const htmlElements = [
				document.getElementById("fixedVideo"),
				document.getElementById("logoBox"),
				document.getElementById("contactContainer"),
				document.getElementById("socialContainer"),
				document.getElementById("addToContact"),
			];

			arScene.addEventListener("targetFound", () => {
				htmlElements.forEach((el) => (el.style.display = "none"));
				alert("AR Target Found!");
			});

			arScene.addEventListener("targetLost", () => {
				htmlElements.forEach((el) => (el.style.display = "flex")); // or original display style
			});
			// Open back camera
			async function startCamera() {
				try {
					const stream = await navigator.mediaDevices.getUserMedia({
						video: { facingMode: "environment" },
						audio: false,
					});
					document.getElementById("cameraFeed").srcObject = stream;
				} catch (e) {
					logger(e);
				}
			}
			startCamera();

			// Mute/Unmute video
			const video = document.getElementById("fixedVideo");
			const btn = document.getElementById("muteBtn");

			// Set initial state
			video.muted = true;

			// Paths to your icons
			const icons = {
				muted: "./icons/mute.png",
				unmuted: "./icons/unmute.png",
			};

			btn.addEventListener("click", () => {
				video.muted = !video.muted;
				btn.src = video.muted ? icons.muted : icons.unmuted;
			});

			// Social actions
			const actions = {
				facebookIcon: () =>
					window.open("https://www.facebook.com/yourusername", "_blank"),
				linkedinIcon: () =>
					window.open("https://www.linkedin.com/in/yourusername", "_blank"),
				whatsappIcon: () =>
					window.open("https://wa.me/8801234567890", "_blank"),
				locationIcon: () =>
					window.open(
						"https://www.google.com/maps?q=123+Main+Street,+City",
						"_blank"
					),
				phoneIcon: () => (window.location.href = "tel:+8801234567890"),
				mailIcon: () => (window.location.href = "mailto:youremail@example.com"),
				websiteIcon: () => window.open("https://www.yourwebsite.com", "_blank"),
				addToContact: () => window.open("./my-contact.vcf", "_blank"),
			};

			Object.keys(actions).forEach((id) => {
				const el = document.getElementById(id);
				el.addEventListener("click", actions[id]);
				el.addEventListener("touchstart", actions[id]);
			});
		</script>
	</body>
</html>
